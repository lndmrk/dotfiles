#!/usr/bin/env bash
#
# SPDX-FileCopyrightText: 2026 Emil Lundmark <emil@lndmrk.se>
# SPDX-License-Identifier: GPL-3.0-or-later

set -e

main() {
  local input="${1:--}"
  local data
  data=$(base64 --wrap=0 "${input}")
  local mime
  mime=$(base64 --decode <<< "${data}" | file --brief --mime-type -)
  echo "data:${mime};base64,${data}"
}

main "${@}"
